<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Interface</title>
<<<<<<<< HEAD:views/user_interface.ejs
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />


    <link rel="stylesheet" href="/main_home.css">
========
>>>>>>>> ab3470bdd25e2b9a4f989305457b049eb5038aa8:public/user_interface.html
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
  </head>
  <style>
    label{
        color: black;
    }

    .navigation{

        border: 2px solid black;
        height: 150px;
        width: 300px;
    }

    .b-t{
        background-color: transparent;
        color: black;
        border: 2px solid black;
        margin: 5px;
        width:240px;
        height: 30px;
        padding: 2px;
        border-radius: 5px;
        text-align: center;
    }

    #tb-t{
        margin: 0px 0px 0px 12.8px;
    }
    #date{
        margin: 5px 0px 0px 8.8px;

    }

    button{
        height: 30px;
        width: 150px;
        border-radius:5px;
        margin:10px 0px 0px 25%;
        background-color: bisque;
        color: black;
    }

    .map-container {
      border: 2px solid black;
      position: absolute;
      height: 500px;
      width: 870px;
      border-radius: 20px;
      top: 30%;
      right: 1%;
      display: flex;
      justify-content: center;
      flex-direction: column;
      align-items: center;
    }

    #map {
      width: 100%;
      height: 100%;
    }

    #navigation-cnt,#main-cnt{
        margin: 14.8% 0px 0px 19.2%;
        border: 2px solid black;
        height: 26vh;
        width: 45vh;
        display:flex;
        justify-content: center;
        align-items: center;
        border-radius: 15px;
    }
    #park{
     width: 180px;
    }

    #data-cnt{

      margin: 1% 0px 0px 1%;
      border: 2px solid black;
      height: 39vh;
      width: 40%;
      display:flex;
      justify-content: center;
      align-items: center;
      border-radius: 15px;

    }

    .data-box{
      border: 2px solid black;
      border-radius: 10px;
      height: 250px;
      width: 570px;
      padding: 20px;
      position:absolute;
    }

    #main-cnt{
      margin: 14.8% 0px 0px 15px;
      position:absolute;
      width: 17%;
      flex-direction: column;
    }

    .boxes{
      border: 2px solid black;
      border-radius: 5px;
      margin: 3px;
      height:45px;
      width: 230px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    span{
      color: black;
      font-family: 'Times New Roman', Times, serif;
      font-weight: 700;
    }

  </style>
  <body>
    <!-- Navbar -->
    <div class="navbar">
      <div id="logo">
        <p>logo</p>
        <img src="" alt="" />
      </div>
      <div id="section">
        <ul>
          <li>
            <div>
              <a href="/home">Home</a>
              <div class="bar"></div>
            </div>
          </li>
          <li>
            <div>
              Announcements
              <div class="bar"></div>
            </div>
          </li>
          <li>
            <div>
              Service
              <div class="bar"></div>
            </div>
          </li>
          <li>
            <div>
              About
              <div class="bar"></div>
            </div>
          </li>
          <li>
            <div>
              Contact
              <div class="bar"></div>
            </div>
          </li>
          <li>
            <div>
              Help
              <div class="bar"></div>
            </div>
          </li>
        </ul>
      </div>

      <select name="lang" id="mul_lang">
        <option selected="eng">ENGLISH</option>
        <option value="hin">HINDI</option>
        <option value="mar">MARATHI</option>
        <option value="guj">GUJATI</option>
        <option value="sans">SANSKRIT</option>
      </select>

      <div class="account" href="#">
        <i class="fa-solid fa-circle-user"></i>
        <p>log in</p>
    </div>
    </div>
    
    <!-- option for choice mode of travelling -->

  <div class="container" id="main-cnt">
    <span>Mode of Travelling</span>
      <div class="b-t">Public Transport</div>
      <div class="b-t">Private Transport</div>
  </div>

    <!-- main containt -->

    <div id="navigation-cnt">
        <div class="navigation">
      <form action="">

        <label>From:</label>
        <input type="text" placeholder="From" id="frominput"  class="b-t" />

      <label >To:</label>
      <input type="text" id="to" placeholder="Destination" class="b-t">
      

      <label>Date:</label>
      <input type="date" class="b-t" id="date">
      <button id="routeBtn">Go</button class="b-t">
      </form>
    </div>
    </div>


  <!-- linked container to main-cnt  -->

    <div id="data-cnt" id="link-cnt">
        <div class="data-box" id="boxA"> <!--box number one -->
          <span>Self Drive</span>
      <form action="">

          <label id="prk">Parking No.:</label>
          <select id="park"  class="b-t">
              <option>Parking NO.</option>
              <option>Parking NO.1</option>
              <option>Parking NO.2</option>
              <option>Parking NO.3</option>
              <option>Parking NO.4</option>
              <option>Parking NO.5</option>
              <option>Parking NO.6</option>
            </select>
             <br>
            <label for="VNP">Vehicle Registration number:</label>
          <input type="text" placeholder="eg.MHXXXXXXXX" class="b-t" required maxlength="10"/>
             <br>
          <label for="image">Driving licence image:</label>
          <input type="file" required class="b-t"/>
          <br>
          <label for="image">Vehicle image with number plate:</label>
          <input type="file" required class="b-t" />
      <button>Book Now</button class="b-t">
      </form>
    </div>
  
  </div>

    <div class="map-container"><div id="map"></div></div> 



    <!-- chatbot code -->

    <div id="chatbot-btn" class="chatbot-btn">
      <i class="fas fa-robot"></i>
    </div>

    <div class="message" id="message">
      <div class="msg-box">
        <div class="chatbot"><p>welcome..!</p></div>
      </div>
      <div class="input"></div>
      <input
        type="text"
        id="search"
        placeholder="Ask freely, I am with you on this journey..."
      />
      <button id="enter">Send</button>
    </div>

    <!-- javascipt program -->

    <script src="/js/main_home.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>
    <script>
    let map = L.map('map').setView([20.5937, 78.9629], 5);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors',
    maxZoom: 18
    }).addTo(map);

  let routingControl, userLatLng, userMarker;

  // Live location
    navigator.geolocation.getCurrentPosition(function(pos){
    userLatLng = [pos.coords.latitude, pos.coords.longitude];
    userMarker = L.marker(userLatLng).addTo(map).bindPopup("Your Location");
    map.setView(userLatLng, 13);
  });

  document.getElementById("routeBtn").addEventListener("click", function(e){
    e.preventDefault();

    const fromInput = document.getElementById("frominput").value.trim();
    const toInput = document.getElementById("to").value.trim();

    if(!toInput) return alert("Enter destination");

    const geocoder = L.Control.Geocoder.nominatim();
    
    let fromLatLng;

   function route(fromLatLng){
      geocoder.geocode(toInput, function(toResults){
        if(toResults.length === 0) return alert("Destination not found");
        const toLatLng = toResults[0].center;

        if(routingControl) map.removeControl(routingControl);

        routingControl = L.Routing.control({
          waypoints: [
            fromLatLng,
            L.latLng(toLatLng.lat, toLatLng.lng)
         ],
          routeWhileDragging: true,
          lineOptions: {styles: [{color :'blue',opacity:0.8,weight:5}]}
        }).addTo(map);
      });
    }

    // Determine starting point
    if(!fromInput && userLatLng){
      fromLatLng = L.latLng(userLatLng[0],userLatLng[1]);
      route(fromLatLng);
    } else {
      geocoder.geocode(fromInput, function(fromResults){
        if(fromResults.length === 0) return alert("From location not found");
        fromLatLng = L.latLng(fromResults[0].center.lat,fromResults[0].center.lng);
        route(fromLatLng);
      });
    }
  });
  console.log("UserLocation:",userLatLng);
  console.log("To:",toLatLng);
</script>
  </body>
</html>
